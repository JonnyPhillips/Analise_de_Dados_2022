<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

  <!--radix_placeholder_meta_tags-->
  <title>Analise de Dados para as Ciencias Sociais: Abrindo e Manipulando Dados</title>
  
  <meta property="description" itemprop="description" content="Entendendo o mundo de Big Data"/>
  
  
  
  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Analise de Dados para as Ciencias Sociais: Abrindo e Manipulando Dados"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Entendendo o mundo de Big Data"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="Analise de Dados para as Ciencias Sociais"/>
  
  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Analise de Dados para as Ciencias Sociais: Abrindo e Manipulando Dados"/>
  <meta property="twitter:description" content="Entendendo o mundo de Big Data"/>
  
  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","output"]}},"value":[{"type":"character","attributes":{},"value":["Abrindo e Manipulando Dados"]},{"type":"character","attributes":{},"value":["Entendendo o mundo de Big Data\n"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_float","toc_depth"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[2]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  
  <script type="application/javascript">
  
    window.headroom_prevent_pin = false;
  
    window.document.addEventListener("DOMContentLoaded", function (event) {
  
      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');
  
      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });
  
      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });
  
      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>
  
  <style type="text/css">
  
  /* Theme (user-documented overrideables for nav appearance) */
  
  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #455a64;
    font-size: 15px;
    font-weight: 300;
  }
  
  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }
  
  .distill-site-nav a:hover {
    color: white;
  }
  
  @media print {
    .distill-site-nav {
      display: none;
    }
  }
  
  .distill-site-header {
  
  }
  
  .distill-site-footer {
  
  }
  
  
  /* Site Header */
  
  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }
  
  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }
  
  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }
  
  
  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }
  
  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }
  
  .distill-site-header .title {
    font-size: 18px;
  }
  
  .distill-site-header .logo {
    padding: 0;
  }
  
  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }
  
  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }
  
  
  
  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }
  
  
  .distill-site-header .nav-toggle {
    display: none;
  }
  
  .nav-dropdown {
    display: inline-block;
    position: relative;
  }
  
  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }
  
  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }
  
  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .nav-dropdown-active {
    display: block;
  }
  
  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }
  
  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }
  
  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }
  
  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }
  
  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }
  
  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }
  
  
  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative;}
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }
  
  /* Site Footer */
  
  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }
  
  /* Headroom */
  
  d-title {
    padding-top: 6rem;
  }
  
  @media print {
    d-title {
      padding-top: 4rem;
    }
  }
  
  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }
  
  .headroom--transition {
    transition: all .4s ease-in-out;
  }
  
  .headroom--unpinned {
    top: -100px;
  }
  
  .headroom--pinned {
    top: 0;
  }
  
  </style>
  
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->
  
  <style type="text/css">
  
  body {
    background-color: white;
  }
  
  .pandoc-table {
    width: 100%;
  }
  
  .pandoc-table>caption {
    margin-bottom: 10px;
  }
  
  .pandoc-table th:not([align]) {
    text-align: left;
  }
  
  .pagedtable-footer {
    font-size: 15px;
  }
  
  .html-widget {
    margin-bottom: 2.0em;
  }
  
  .l-screen-inset {
    padding-right: 16px;
  }
  
  .l-screen .caption {
    margin-left: 10px;
  }
  
  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .shaded-content {
    background: white;
  }
  
  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }
  
  .hidden {
    display: none !important;
  }
  
  d-article {
    padding-bottom: 30px;
  }
  
  d-appendix {
    padding-top: 30px;
  }
  
  d-article>p>img {
    width: 100%;
  }
  
  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }
  
  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  /* CSS for table of contents */
  
  .d-toc {
    color: rgba(0,0,0,0.8);
    font-size: 0.8em;
    line-height: 1em;
  }
  
  .d-toc-header {
    font-size: 0.6rem;
    font-weight: 400;
    color: rgba(0, 0, 0, 0.5);
    text-transform: uppercase;
    margin-top: 0;
    margin-bottom: 1.3em;
  }
  
  .d-toc a {
    border-bottom: none;
  }
  
  .d-toc ul {
    padding-left: 0;
  }
  
  .d-toc li>ul {
    padding-top: 0.8em;
    padding-left: 16px;
    margin-bottom: 0.6em;
  }
  
  .d-toc ul,
  .d-toc li {
    list-style-type: none;
  }
  
  .d-toc li {
    margin-bottom: 0.9em;
  }
  
  .d-toc-separator {
    margin-top: 20px;
    margin-bottom: 2em;
  }
  
  .d-article-with-toc {
    border-top: none;
    padding-top: 0;
  }
  
  
  
  /* Tweak code blocks (note that this CSS is repeated above in an injection
     into the d-code shadow dom) */
  
  d-code {
    overflow-x: auto !important;
  }
  
  pre.d-code code.d-code {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }
  
  pre.text-output {
  
    font-size: 12px;
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  @media(min-width: 768px) {
  
  d-code {
    overflow-x: visible !important;
  }
  
  pre.d-code code.d-code  {
      padding-left: 18px;
      font-size: 14px;
  }
  pre.text-output {
    font-size: 14px;
  }
  }
  
  /* Figure */
  
  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }
  
  .figure img {
    width: 100%;
  }
  
  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }
  
  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }
  
  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }
  
  
  
  /* Tweak 1000px media break to show more text */
  
  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }
  
    .grid {
      grid-column-gap: 16px;
    }
  
    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }
  
  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }
  
    .grid {
      grid-column-gap: 32px;
    }
  }
  
  
  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */
  
  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  
  
  /* Social footer */
  
  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }
  
  .disqus-comments {
    margin-right: 30px;
  }
  
  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }
  
  #disqus_thread {
    margin-top: 30px;
  }
  
  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }
  
  .article-sharing a:hover {
    border-bottom: none;
  }
  
  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }
  
  .subscribe p {
    margin-bottom: 0.5em;
  }
  
  
  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }
  
  
  /* Improve display for browsers without grid (IE/Edge <= 15) */
  
  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }
  
  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }
  
  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }
  
  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }
  
  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }
  
  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }
  
  
  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }
  
  .downlevel .footnotes ol {
    padding-left: 13px;
  }
  
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }
  
  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }
  
  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }
  
  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  </style>
  
  <script type="application/javascript">
  
  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }
  
  // show body when load is complete
  function on_load_complete() {
  
    // set body to visible
    document.body.style.visibility = 'visible';
  
    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }
  
    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }
  
  function init_distill() {
  
    init_common();
  
    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);
  
    // create d-title
    $('.d-title').changeElementType('d-title');
  
    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);
  
    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();
  
    // move posts container into article
    $('.posts-container').appendTo($('d-article'));
  
    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');
  
    // create d-bibliography
    var bibliography = $('<d-bibliography></d-bibliography>');
    $('#distill-bibliography').wrap(bibliography);
  
    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;
  
    // replace citations with <d-cite>
    $('.citation').each(function(i, val) {
      appendix = true;
      var cites = $(this).attr('data-cites').split(" ");
      var dt_cite = $('<d-cite></d-cite>');
      dt_cite.attr('key', cites.join());
      $(this).replaceWith(dt_cite);
    });
    // remove refs
    $('#refs').remove();
  
    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();
  
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-toc a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });
  
    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');
  
    // replace code blocks with d-code
    $('pre>code').each(function(i, val) {
      var code = $(this);
      var pre = code.parent();
      var clz = "";
      var language = pre.attr('class');
      if (language) {
        // map unknown languages to "clike" (without this they just dissapear)
        if ($.inArray(language, ["bash", "clike", "css", "go", "html",
                                 "javascript", "js", "julia", "lua", "markdown",
                                 "markup", "mathml", "python", "svg", "xml"]) == -1)
          language = "clike";
        language = ' language="' + language + '"';
        var dt_code = $('<d-code block' + language + clz + '></d-code>');
        dt_code.text(code.text());
        pre.replaceWith(dt_code);
      } else {
        code.addClass('text-output').unwrap().changeElementType('pre');
      }
    });
  
    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {
  
      // capture layout
      var layout = $(this).attr('data-layout');
  
      // apply layout to markdown level block elements
      var elements = $(this).children().not('d-code, pre.text-output, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });
  
  
      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });
  
    // load distill framework
    load_distill_framework();
  
    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {
  
      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;
  
      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');
  
      // table of contents
      if (have_authors) // adjust border if we are in authors
        $('.d-toc').parent().addClass('d-article-with-toc');
  
      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');
  
      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }
  
      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');
  
      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");
  
      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }
  
       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }
  
      // inject pre code styles (can't do this with a global stylesheet b/c a shadow root is used)
      $('d-code').each(function(i, val) {
        var style = document.createElement('style');
        style.innerHTML = 'pre code { padding-left: 10px; font-size: 12px; border-left: 2px solid rgba(0,0,0,0.1); } ' +
                          '@media(min-width: 768px) { pre code { padding-left: 18px; font-size: 14px; } }';
        if (this.shadowRoot)
          this.shadowRoot.appendChild(style);
      });
  
      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();
  
      // clear polling timer
      clearInterval(tid);
  
      // show body now that everything is ready
      on_load_complete();
    }
  
    var tid = setInterval(distill_post_process, 50);
    distill_post_process();
  
  }
  
  function init_downlevel() {
  
    init_common();
  
     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));
  
    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
  
    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();
  
    // remove toc
    $('.d-toc-header').remove();
    $('.d-toc').remove();
    $('.d-toc-separator').remove();
  
    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });
  
  
    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);
  
    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);
  
    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();
  
    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();
  
    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));
  
    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });
  
    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));
  
    $('body').addClass('downlevel');
  
    on_load_complete();
  }
  
  
  function init_common() {
  
    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};
  
        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });
  
        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);
  
    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});
  
    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });
  
      }
    });
  
    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });
  
    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }
  
    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');
  
    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");
  
    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();
  
    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }
  
  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });
  
  </script>
  
  <!--/radix_placeholder_distill-->
  <script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Abrindo e Manipulando Dados","description":"Entendendo o mundo de Big Data","authors":[]}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="index.html" class="title">Analise de Dados para as Ciencias Sociais</a>
</div>
<div class="nav-right">
<a href="index.html">Introducao</a>
<a href="syllabus.html">Syllabus</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Tutoriais
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="introducao.html">1. Introducao</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Desafios
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="desafio_1.html">Desafio 1</a>
<a href="desafio_2.html">Desafio 2</a>
<a href="desafio_3.html">Desafio 3</a>
<a href="desafio_4.html">Desafio 4</a>
<a href="desafio_5.html">Desafio 5</a>
</div>
</div>
<a href="recursos.html">Recursos</a>
<a href="projeto.html">Projeto Final</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Abrindo e Manipulando Dados</h1>
<p><p>Entendendo o mundo de Big Data</p></p>
</div>


<div class="d-article">
<h3 class="d-toc-header">Table of Contents</h3>
<nav class="d-toc" id="TOC">
<ul>
<li><a href="#manipulando-dados">Manipulando Dados</a><ul>
<li><a href="#renomear-variáveis-rename">1. Renomear Variáveis (<code>Rename</code>)</a></li>
<li><a href="#selecionar-variáveis-select">2. Selecionar Variáveis (<code>Select</code>)</a></li>
<li><a href="#transformar-variáveis-mutate">3. Transformar Variáveis (<code>Mutate</code>)</a></li>
<li><a href="#cortar-observações-slice">4. Cortar Observações (<code>Slice</code>)</a></li>
<li><a href="#filtrar-observações-filter">5. Filtrar Observações (<code>Filter</code>)</a></li>
<li><a href="#combinando-manipulações">Combinando Manipulações</a></li>
</ul></li>
<li><a href="#abrindo-dados">Abrindo Dados</a><ul>
<li><a href="#dados-em-arquivos-textuais-.csv-.tsv-.txt">Dados em arquivos textuais (.csv, .tsv, .txt)</a></li>
<li><a href="#dados-em-arquivos-de-excel">Dados em arquivos de Excel</a></li>
<li><a href="#dados-de-spss-stata-e-sas">Dados de SPSS, Stata e SAS</a></li>
</ul></li>
</ul>
</nav>
<hr class="d-toc-separator"/>
<style>
div.green { background-color:#e5f5e0; border-radius: 5px; padding: 20px;}
</style>
<style>
div.orange { background-color:#fee6ce; border-radius: 5px; padding: 20px;}
</style>
<style>
div.blue { background-color:#deebf7; border-radius: 5px; padding: 20px;}
</style>
<h1 id="manipulando-dados">Manipulando Dados</h1>
<p>Estamos trabalhando com um banco de dados, mas ele não está pronto para a análise que desejamos fazer. Por exemplo, as variáveis não contém os indicadores relevantes, os nomes das variáveis não fazem sentido, a unidade de análise precisa ser mais agregada, e queremos retirar uns outliers. Como podemos ‘manipular’ um banco de dados para o tamanho, a estrutura e o conteúdo apropriado para a análise desejada?</p>
<p>Fazemos a manipulação da mesma forma que trabalhamos com os ingredientes de uma refeição: executando <strong>ações</strong> para cortar, selecionar e combinar os ingredientes. Sempre começando com o nosso tibble (data.frame), vamos ver como aplicar ‘verbos’ (ações) que transformam o nosso banco de dados.</p>
<p>Na verdade, esta lógica de manipulação de dados baseado em ‘verbos’ é apenas uma abordagem, e no futuro vamos ver alternativas. Vamos trabalhar com a abordagem de verbos do pacote <code>tidyverse</code> porque (i) é mais fácil para aprender, (ii) é mais sistemático, e (iii) é mais transparente para ler e entender do que outros pacotes. Os códigos descritos no restante do tutorial só funcionam se você abrir a biblioteca do tidyvere num chunk inicial:</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<pre class="clike"><code>
```{r}
library(&quot;tidyverse&quot;)
```</code></pre>
<h2 id="renomear-variáveis-rename">1. Renomear Variáveis (<code>Rename</code>)</h2>
<p>Começamos com uma transformação bem simples, mas se você já abriu um banco de dados com variáveis nomeadas como ‘hu52_lm_00’ você vai entender o valor deessa transformação. Cada coluna (variável) em nosso tibble sempre tem um nome, e podemos troca-lo a qualquer momento.</p>
<p>Para inspecionar os nomes de um tibble, podemos simplesmente executar o nome do objeto e ver o que aparece na tabela abaixo do chunk. Ou podemos usar a funçõ ‘names()’. Vamos ver com o exemplo de banco de dados de voos que usamos no tutorial anterior, lembrando que temos que abrir a biblioteca de voos primeiramente.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
library(&quot;nycflights13&quot;)
names(flights)</code></pre>
<pre><code>
 [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;           
 [4] &quot;dep_time&quot;       &quot;sched_dep_time&quot; &quot;dep_delay&quot;     
 [7] &quot;arr_time&quot;       &quot;sched_arr_time&quot; &quot;arr_delay&quot;     
[10] &quot;carrier&quot;        &quot;flight&quot;         &quot;tailnum&quot;       
[13] &quot;origin&quot;         &quot;dest&quot;           &quot;air_time&quot;      
[16] &quot;distance&quot;       &quot;hour&quot;           &quot;minute&quot;        
[19] &quot;time_hour&quot;     </code></pre>
</div>
<p>Nota que o R descreve os índices (as posições na lista) dos nomes na esquerda.</p>
<p>Queremos renomear a variável <code>arr_time</code> para <code>arrival_time</code> - como faremos? Temos que aplicar a verba e função <code>rename()</code> ao banco de dados <code>flights</code>. Agora temos um princípio fundamental da manipulação de dados: <strong>começamos com o substantivo (o objeto; o tibble) e depois aplicamos o verbo (a função).</strong></p>
<p>Para conectar o substantivo com o verbo, usamos um símbolo bizarro que se chama o ‘pipe’: <code>%&gt;%</code>. Não pergunte o motivo para usar este símbolo; apenas deus tem a resposta. A única coisa que importa é como a usar:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% rename()</code></pre>
</div>
<div class="blue">
<p><strong>Habilidade Básica de Programação: Pipes, <code>%&gt;%</code></strong> O pipe conecta um tibble para uma função. Pode ser traduzido como ‘e depois’, ou ‘then’ em inglês. Por exemplo, “pegue o banco de dados de flights, e depois renomear”.</p>
<p>Podemos juntar vários pipes para combinar funções diferentes e gerar uma análise mais complexo. Por exemplo:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% rename() %&gt;% rename() %&gt;% outra_funcao()</code></pre>
</div>
</div>
<p>O código acima não faz nada, porque ainda não especificamos <em>qual</em> variável a renomear, ou o novo nome. Estes são parâmetros da função rename, e tem um formato específico:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% rename(arrival_time=arr_time)</code></pre>
</div>
<p>Qual o formato aqui? Dentro dos parênteses, colocamos o <em>novo</em> nome primeiro, depois o sinal de iguais, depois o nome <em>velho</em>. Se digitar o nome original errado, não funciona. O nome novo pode ser diversas coisas, mas evite começar com números e por enquanto evite usar espaços (pode usar <code>_</code> em vez de um espaço).</p>
<p>Vamos inspecionar o nosso novo tibble renomeado em toda a sua glória:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights</code></pre>
</div>
<p>…O que aconteceu?? Porque você acha a variável em nosso tibble ainda tem o nome `arr_time’?</p>
<p>Porque não mudamos nada: aplicando verbos não <em>salva</em> o novo tibble resultado automaticamente. Efetivamente, o novo tibble renomeado desaparece no momento que seja criado. Para salvar, temos que usar a flecha de atribuição ao um novo objeto:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights_renomeado &lt;- flights %&gt;% rename(arrival_time=arr_time)

flights_renomeado</code></pre>
</div>
<p>Agora, o tibble de <code>flights_renomeado</code> tem a variável se chama <code>arrival_time</code>, sim?</p>
<p>Dependendo do nosso objetivo, as vezes faz sentido salvar o nosso objeto com o mesmo nome que ele tinha antes, sobreescrevendo o conteúdo dele. (Pelo menos, isso salva memória).</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights &lt;- flights %&gt;% rename(arrival_time=arr_time)

flights</code></pre>
</div>
<p>Mais uma detalhe: Para renomear colunas diversas temos que escrever uma corrente de renomeação?</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights &lt;- flights %&gt;% rename(arrival_time=arr_time) %&gt;% rename(departure_time=dep_time)</code></pre>
</div>
<p>Podemos, mas normalmente é mais eficiente fazer dentro da mesma função, separando as colunas por vírgula (e uma nova linha para deixar o código claro):</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights &lt;- flights %&gt;% rename(arrival_time=arr_time,
                   departure_time=dep_time)</code></pre>
</div>
<h2 id="selecionar-variáveis-select">2. Selecionar Variáveis (<code>Select</code>)</h2>
<p>Já aprendemos o formato, e tudo fica no mesmo padrão a partir daqui. Quando temos colunas demais em nosso banco de dados, sempre ajuda focar nas variáveis mais relevantes. Para selecionar um subconjunto das variáveis (colunas) para manter no tibble, usamos o verbo <code>select()</code>. De novo, começamos com o tibble, o pipe, e finalmente o verbo select:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% select(year, month, day)</code></pre>
</div>
<p>Note que podemos selecionar várias variáveis usando uma vírgula para separar os nomes das variáveis. Fácil, sim?</p>
<p>Mas presta atenção - se você salva o seu objeto com o mesmo nome do original, vai perder as outras variáveis definitivamente (ou pelo menos até que abre o banco de dados ou roda o script de novo):</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights &lt;- flights %&gt;% select(year, month, day)</code></pre>
</div>
<h2 id="transformar-variáveis-mutate">3. Transformar Variáveis (<code>Mutate</code>)</h2>
<p>Que tal se quisermos <em>criar</em> novas variáveis? Isso é comum, por exemplo quando queremos o PIB per capita e não simplesmente o PIB temos que pegar duas variáveis, PIB e população e dividir o primeiro pelo segundo. Em R o verbo para realizar isso se chama um <code>mutate()</code>. Ele permite a combinação, usando qualquer tipo de matématica que pode quiser, de colunas que <em>já existem</em> no banco de dados (se quer trazer dados de fora, tem que usar um <code>join</code> que vamos discutir logo no futuro).</p>
<p>Como funciona? Como sempre, pegamos o nosso tibble relevante, depois o pipe, depois a função <code>mutate()</code>. Dentro dos paramêtros de mutate, precisamos especificar o cálculo a ser realizado usando os nomes de colunas atuais, e o nome da nova variável (coluna) em que vamos guardar o resultado do cálculo. Por exemplo, se queremos dobrar o <code>dep_delay</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights &lt;- flights %&gt;% mutate(dep_delay_dobro=dep_delay*2)</code></pre>
</div>
<p>Note que dentro do mutate, usamos um <code>=</code> em vez da flecha para salvar o resultado.</p>
<p>Onde fica a nossa nova coluna? Na última posição na direita do tibble.</p>
<p>Podemos combinar variáveis múltiplas para fazer cálculos mais complexos. Por exemplo, por algum motivo eu quero saber metade da diferença entre o <code>dep_time</code> e <code>arr_time</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights &lt;- flights %&gt;% mutate(calculo=(arr_time-dep_time)/2)</code></pre>
</div>
<p>Como na matemática, lembra se que os parênteses importam.</p>
<p>Mais uma possibilidade: podemos transformar uma coluna atual sem criar um novo. Para fazer isso, é só renomear a coluna com o mesmo nome do original. Por exemplo, podemos recalcular o <code>dep_delay</code> de minutos para segundos:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights &lt;- flights %&gt;% mutate(dep_delay=dep_delay*60)</code></pre>
</div>
<p>E finalmente, podemos usar funções dentro de mutate e nào simplesmente símbolos matemáticos. No futuro, isso abre um mundo de possibilidades. Por enquanto, vamos apenas usar a função <code>tolower()</code> para mudar o <code>origin</code> do voo de maiúsculas para minúsculas:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights &lt;- flights %&gt;% mutate(origin=tolower(origin))</code></pre>
</div>
<div class="blue">
<p><strong>Habilidade Básica de Programação: Operações Matemáticas</strong> R serve como calculadora é bastante simples realizar operações matemáticas, quanto com números, tanto com variáveis.</p>
<p>Soma:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
x + y</code></pre>
</div>
<p>Subtração:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
x - y</code></pre>
</div>
<p>Multiplicação</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
x * y</code></pre>
</div>
<p>Divisão:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
x / y</code></pre>
</div>
<p>Potência:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
x ^ y</code></pre>
</div>
<p>Divisão inteira (sem resto):</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
x %/% y</code></pre>
</div>
<p>Resto da divisão:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
x %% y</code></pre>
</div>
</div>
<h2 id="cortar-observações-slice">4. Cortar Observações (<code>Slice</code>)</h2>
<p>Até agora, trabalhamos com manipulações de variáveis (colunas). Mas podemos também mexer com as observações (linhas). Podemos, por exemplo, limitar a nossa análise apenas para a quinta linha do banco de dados usando o verbo <code>slice()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% slice(5)</code></pre>
</div>
<p>Um pouco triste perder toda a resta da informação, então como selecionamos todas as primeiras cinco linhas?</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% slice(1:5)</code></pre>
</div>
<div class="blue">
<p><strong>Habilidade Básica de Programação: Conjuntos de números</strong> Para selecionar observações ou outros elementos de objetos, temos que criar um vetor com os índices (as posições) dos elementos desejados. Um jeito de fazer uso é usando a nossa função para criar vetores, <code>c()</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
linhas_desejadas &lt;- c(1,4,5,8,22,169)</code></pre>
</div>
<p>Agora, podemos usar este vetor dentro da função slice.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% slice(linhas_desejadas)</code></pre>
</div>
<p>O R substituirá o objeto (o vetor) <code>linhas_desejadas</code> com os 6 números e devolve um tibble das 6 linhas.</p>
<p>Também é possível selecionar as observações <strong>não</strong>-desejadas, inserindo um menos em frente do número. O R devolve o tibble inteiro sem a linha identificada.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% slice(-1)</code></pre>
</div>
<p>Compare o número de linhas do código acima com o número de linhas no tibble original de <code>flights</code>.</p>
<p>Para conjuntos de números mais sistemáticos, temos várias opções. Usamos os dois pontos para indicar um conjunto sequencial de números, por exemplo <code>10:20</code> significa o mesmo que <code>c(10,11,12,13,14,15,16,17,18,19,20)</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% slice(10:20)</code></pre>
</div>
<p>Para conjuntos não-sequenciais mais sistemáticos, podemos usar a função <code>seq()</code>, que tem três paramêtros: valor inicial, valor final, e incremento. Por exemplo, para selecionar cada 10 linhas nas primeiras 100 linhas, usamos:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% slice(seq(from=1,
                      to=100,
                      by=10))</code></pre>
</div>
<p>Note que aqui usamos os nomes de cada parâmetro/argumento seguido por um sinal de iguais e o valor relevante. Estes argumentos têm um ordem oficial dentro da função, e se saibamos de ordem e especificamos todos os argumentos, podemos evitar os nomes de parâmetros/argumentos. O código abaixo é identical ao código acima:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% slice(seq(1,100,10))</code></pre>
</div>
<p>Como sabemos os nomes e o ordem dos argumentos? Consultamos o help da função:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
?seq</code></pre>
</div>
</div>
<h2 id="filtrar-observações-filter">5. Filtrar Observações (<code>Filter</code>)</h2>
<p>Mais frequentemente, não importa a posição vertical da observação no conjunto de dados, para limitar a nossa análise o que importa é o valor de uma variável. Por exemplo, podemos querer os dados apenas da Ásia, do século 20, de mulheres, ou de homens acima de 18 anos de idade que moram em São Paulo.</p>
<p>Estes critérios podem ser aplicados usando o verbo <code>filter()</code>. Nos paramêtros de filter, temos que especificar as <strong>condições</strong> que o R vai avaliar para decidir se vai incluir no banco de dados final. A condição <em>sempre</em> tem que avaliar para verdadeiro ou falso (TRUE ou FALSE) para cada observação, e o R guarda apenas as observações ‘verdadeiros’.</p>
<p>Em nosso banco de dados de voos, vamos selecionar apenas os voos de mês 6 (junho). Como definimos esta condição? Precisamos de três elementos:</p>
<ol type="1">
<li><strong>Nome de variável</strong> - aqui, o mês, <code>month</code>.</li>
<li><strong>Tipo de comparação</strong> - aqui, queremos selecionar um mês específico então precisamos de uma igualdade que digitamos em R como <code>==</code>. Sim, dois iguais juntos! Explicamos embaixo.</li>
<li><strong>Critério</strong> - aqui, qual mês? Nos dados, junho está codificado num número, então ‘6’.</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% filter(month==6)</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
# A tibble: 28,243 x 20
    year month   day dep_time sched_dep_time dep_delay arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
 1  2013     6     1        2           2359         3      341
 2  2013     6     1      451            500        -9      624
 3  2013     6     1      506            515        -9      715
 4  2013     6     1      534            545       -11      800
 5  2013     6     1      538            545        -7      925
 6  2013     6     1      539            540        -1      832
 7  2013     6     1      546            600       -14      850
 8  2013     6     1      551            600        -9      828
 9  2013     6     1      552            600        -8      647
10  2013     6     1      553            600        -7      700
# ... with 28,233 more rows, and 13 more variables:
#   sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;,
#   flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
#   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
#   time_hour &lt;dttm&gt;, dep_delay_dobro &lt;dbl&gt;</code></pre>
</div>
<p>O resultado é um novo tibble com quantas linhas? Se o nosso filtro funcionou, deve ter bem menos que o tibble original. Normalmente queremos salvar o tibble com outro nome, dado que ele representa um novo conjunto de observações agora:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights_junho &lt;- flights %&gt;% filter(month==6)</code></pre>
</div>
<div class="blue">
<p><strong>Habilidade Básica de Programação: Operadores Relacionais (Comparativos)</strong></p>
<p>O operadores relacionais são seis em R:</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>Operador</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>==</td>
<td>igual</td>
</tr>
<tr class="even">
<td>2</td>
<td>!=</td>
<td>Não igual</td>
</tr>
<tr class="odd">
<td>3</td>
<td>&lt;</td>
<td>Menor</td>
</tr>
<tr class="even">
<td>4</td>
<td>&gt;</td>
<td>Maior</td>
</tr>
<tr class="odd">
<td>5</td>
<td>&lt;=</td>
<td>Menor ou igual</td>
</tr>
<tr class="even">
<td>6</td>
<td>&gt;=</td>
<td>Maior ou igual</td>
</tr>
</tbody>
</table>
<p>Simples. Alguns exemplos de uso básico de operadores abaixo.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
42 == 41
42 != 41
(2 + 2) == (3 + 1)
(2 + 2) != (3 + 1)
5 &gt; 3
5 &lt; 3
42 &gt; 42
42 &lt; 41
42 &gt;= 42
42 &lt;= 41</code></pre>
</div>
<p>Operadores relacionais também vale para textos:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
&quot;texto&quot; == &quot;texto&quot;
&quot;texto&quot; == &quot;texTo&quot;
&quot;texto&quot; != &quot;texto&quot;</code></pre>
</div>
<p>Note no segundo exemplo que o R é “case sensitive”, ou seja, diferencia maiúsculas de minúsculas ao comparar textos.</p>
<p>Textos também podem ser ordenados (lexicograficamente, isto é, alfabeticamente):</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
&quot;a&quot; &gt; &quot;b&quot;
&quot;a&quot; &lt; &quot;b&quot;
&quot;A&quot; &lt; &quot;b&quot;
&quot;A&quot; &gt; &quot;a&quot;</code></pre>
</div>
<p>E valores lógicos? Veja se entende o que acontece nos exemplos abaixo:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
TRUE == 1
FALSE == 0
TRUE &gt; FALSE</code></pre>
</div>
<p>Podemos comparar valores armazenados em variáveis da mesma maneira que fizemos nos exemplos até aqui:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
x &lt;- 5
y &lt;- 10
x &gt; y</code></pre>
</div>
</div>
<p>Podemos combinar critérios diversos usando o símbolo de ‘e’, <code>&amp;</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights_junho_5 &lt;- flights %&gt;% filter(month==6 &amp; day==5)</code></pre>
</div>
<p>E existem vários tipos de comparações, incluindo maior (<code>&gt;</code>) e menor (<code>&lt;</code>):</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights_junho_5_manha &lt;- flights %&gt;% filter(month==6 &amp; day==5 &amp; dep_time&lt;1200)</code></pre>
</div>
<div class="blue">
<p><strong>Habilidade Básica de Programação: Operadores Logicais</strong></p>
<p>Para combinar critérios múltiplos no mesmo filtro, temos que usar os operadores logicais.</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>Operador</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>!</td>
<td>Não</td>
</tr>
<tr class="even">
<td>2</td>
<td>&amp;</td>
<td>E</td>
</tr>
<tr class="odd">
<td>3</td>
<td>|</td>
<td>Ou</td>
</tr>
</tbody>
</table>
<p>Veja a tabela de possibilidades de combinação de duas proposições com a conjunção “&amp;”:</p>
<table>
<thead>
<tr class="header">
<th>Proposição 1</th>
<th>Proposição 2</th>
<th>Combinação</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TRUE</td>
<td>TRUE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td>TRUE</td>
<td>FALSE</td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td>FALSE</td>
<td>TRUE</td>
<td>FALSE</td>
</tr>
<tr class="even">
<td>FALSE</td>
<td>FALSE</td>
<td>FALSE</td>
</tr>
</tbody>
</table>
<p>Se o valor atende às duas condições, então o resultado é TRUE. Se ao menos uma proposição é falsa, sob a conjunção “e”, então a combinação das proposições também é.</p>
<p>Veja a tabela de possibilidades de combinação de duas proposições com a conjunção “ou”:</p>
<table>
<thead>
<tr class="header">
<th>Proposição 1</th>
<th>Proposição 2</th>
<th>Combinação</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TRUE</td>
<td>TRUE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td>TRUE</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td>FALSE</td>
<td>TRUE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td>FALSE</td>
<td>FALSE</td>
<td>FALSE</td>
</tr>
</tbody>
</table>
<p>Com esta nova flexibilidade, temos que pensar com cuidado para construir o filtro apropriado. E temos que usar os parenteses apropriados, porque a lista acima é em ordem de prioridade (como na matemática quando multiplicação acontece antes de adição). Por exemplo, se quissemos todos os voos que atrasaram na chegada por mais de 50 minutos, e que decolaram antes das 5h <em>ou</em> que decolaram de Atlanta (ATL), temos que escrever assim:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% filter((dep_time&lt;=500 | dest==&quot;ATL&quot;) &amp; arr_delay&gt;=50)</code></pre>
</div>
<p>O resultado é diferente do pedido quando tiramos os parenteses:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% filter(dep_time&lt;=500 | dest==&quot;ATL&quot; &amp; arr_delay&gt;=50)</code></pre>
</div>
<p>Note que o número de linhas é bem diferente. Aqui, pedimos para todos os voos que decolaram antes das 5h (se tivesse atraso ou não), juntado com um outro conjunto os voos que decolaram de Atlanta com atraso de 50 minutos na chegada.</p>
<p>É fácil pedir o inverso deste conjunto usando <code>!</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% filter(!((dep_time&lt;=500 | dest==&quot;ATL&quot;) &amp; arr_delay&gt;=50))</code></pre>
</div>
</div>
<h2 id="combinando-manipulações">Combinando Manipulações</h2>
<p>Frequentemente, limpar um banco de dados exige dezenas de transformações para construir o banco de dados apropriado para a nossa análise. A lógica e estrutura de cada ação acima nos permitimos combinar operações em sequência; em uma corrente de pipes e verbos. Depois de uma ação, simplesmente continuamos com mais um pipe (<code>%&gt;%</code>) e a próxima ação.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
flights %&gt;% 
  rename(arrival_time=arr_time) %&gt;% 
  mutate(dep_delay=dep_delay*60) %&gt;%
  filter(month==6 &amp; day==5) %&gt;% 
  select(year, month, day, arrival_time, dep_delay)</code></pre>
</div>
<p>É importante entender que depois de cada ação, o banco de dados encaminhado à proxíma ação é o resultado da ação anterior. Então na linha final, <code>select(year, month, day, arr_time, dep_delay)</code> não funciona - <code>arr_time</code> já foi renomeado para <code>arrival_time</code> e temos que fazer referência ao novo nome.</p>
<p>Voltando à analogia de preparar uma refeição, o código acima é uma <strong>receita</strong>: Pegue o banco de dados de <code>flights</code>, depois renomear a variável <code>arr_time</code>, depois multiplicar a variável <code>dep_delay</code> por 60, depois filtrar as observações para elas do 5 de junho, depois selecionar as cinco variáveis, e devolva o banco de dados final.</p>
<p>Note também que no código acima inserimos uma nova linha depois de cada pipe; isso não é necessário mas ajuda em organizar o código e deixá-lo mais fácil a ler.</p>
<div class="green">
<h1 id="exercício-1-manipulando-dados">Exercício 1: Manipulando dados</h1>
<p>Com essas novas habilidades, vamos preparar uma análise rápida do banco de dados <code>flights</code> com o objetivo de produzir um relatório em html no final. Gera uma tabela apropriada para cada critério:</p>
<ol type="1">
<li>Os voos de United (<code>carrier</code> UA) que decolaram no 25 de janeiro</li>
</ol>
<div class="layout-chunk" data-layout="l-body">

</div>
<ol start="2" type="1">
<li>Os voos de JetBlue (<code>carrier</code> B6) que decolaram mais que 300 minutos atrasados de Newark (<code>origin</code> EWR).</li>
</ol>
<div class="layout-chunk" data-layout="l-body">

</div>
<ol start="3" type="1">
<li>Calcule a velocidade dos voos que decolaram de LaGuardia (<code>origin</code> LGA) no dia 7 de setembro antes das 6h. Lembre-se que velocidade é distância dividido por tempo. (Qual é a unidade desta velocidade?)</li>
</ol>
<div class="layout-chunk" data-layout="l-body">

</div>
<ol start="4" type="1">
<li>Uma tabela com apenas o atraso na chegada de todos os voos atrasados por pelo menos 60 minutos que partiram do aeroporto Newark e chegaram em Buffalo (BUF) na sexta dia de qualquer mes.</li>
</ol>
<div class="layout-chunk" data-layout="l-body">

</div>
<ol start="5" type="1">
<li>Uma tabela dos números dos aviões (<code>tailnum</code>), destino, distância e a velocidade em milhas por hora para voos que voaram em maio pelo menos 1000 milhas ou com velocidade acima de 500 milhas por hora.</li>
</ol>
<div class="layout-chunk" data-layout="l-body">

</div>
<ol start="6" type="1">
<li>Prepare os resultados de todos os seus análises acima em tabelas uasndao <code>datatable</code>, e faça o <code>knit</code> do seu script de R markdown para produzir o relatório final.</li>
</ol>
</div>
<h1 id="abrindo-dados">Abrindo Dados</h1>
<h2 id="dados-em-arquivos-textuais-.csv-.tsv-.txt">Dados em arquivos textuais (.csv, .tsv, .txt)</h2>
<p>Agora que estamos especialistas na manipulação de dados já disponíveis em R, queremos analisar dados mais interessantes e relevantes para a nossa própria pesquisa. Isso exige a abertura de arquivos externos; bancos de dados que criamos ou recebemos de outros estudos. Lembrando que o nosso script vai processar os dados cada vez que é executado pela botão ‘Knit’, temos que incorporar a abertura de dados em código também, dentro do script.</p>
<p>Existem muitas funções para abrir arquivos de dados, mas para simplificar neste curso, vamos nos concentrar em algumas dos mais flexíveis, simples e úteis para trabalhar com dados ‘retangulares’ (.csv, .tsv, .txt). As funções ficam parte da biblioteca <code>tidyverse</code> que já abrimos.</p>
<p>Provavelmente a função mais usada é <code>read_csv</code>, que abre arquivos com extensão .csv. Em vez de abrir arquivos do nosso computador, também podemos abrir links online e, para simplificar, disponibilizamos vários arquivos em nosso repositório do github. Você pode colar o url de cada arquivo no navegador para ver o seu formato antes de executar o código.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
file1 &lt;- &quot;https://raw.githubusercontent.com/leobarone/ifch_intro_r/master/data/bf_amostra_hv.csv&quot;
dados &lt;- read_csv(file1)</code></pre>
</div>
<p><code>dados</code> deve aperecer como um objeto - um tibble - em seu ‘Environment’. A função <code>read_delim</code> nos dá mais flexibilidade para lidar com tipos incomuns de arquivos. Por exemplo, podemos especificar o caractere usado para separar as colunas (por padrão, esta é a vírgula em read_csv):</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
dados &lt;- read_delim(file1, 
                    delim = &quot;,&quot;)

file_semi_colon &lt;- &quot;https://raw.githubusercontent.com/leobarone/ifch_intro_r/master/data/bf_amostra_hp.csv&quot;
dados &lt;- read_delim(file_semi_colon, 
                    delim = &quot;;&quot;)

file_tab &lt;- &quot;https://raw.githubusercontent.com/leobarone/ifch_intro_r/master/data/bf_amostra_ht.csv&quot;
dados &lt;- read_delim(file_tab, 
                    delim = &quot;\t&quot;)</code></pre>
</div>
<p>O padrão de <em>read_delim</em> (e <em>read_csv</em>) é importar a primeira linha como nome das variáveis. Se nossos dados não tiverem um <em>header</em> (cabeçalho, ou seja, nomes das variáveis na primeira linhas), a primeira linha de dados se torna equivocadamente o nome das variáveis (inclusive os números, que aparecem antecedidos por um “X”). Para corrigir o problema utilizamos o argumento “col_names”, que deve ser igual a “FALSE” para os dados armezenados sem nomes de colunas, por exemplo:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
file_sem_header &lt;- &quot;https://raw.githubusercontent.com/leobarone/ifch_intro_r/master/data/bf_amostra_nv.csv&quot;
dados &lt;- read_delim(file_sem_header, 
                    col_names = F, 
                    delim = &quot;,&quot;)</code></pre>
</div>
<p>Além dos valores lógicos, “col_names” também aceita um vetor com novos nomes para as colunas como argumento:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
dados &lt;- read_delim(file_sem_header, 
                    col_names = c(&quot;estado&quot;, &quot;municipio_cod&quot;, &quot;municipio_nome&quot;,
                                  &quot;NIS&quot;, &quot;transferido&quot;),
                    delim = &quot;,&quot;)</code></pre>
</div>
<p>Por vezes, é interessante definir as classes das variáveis a serem importadas, para evitar novas transformações quando os dados forem importados. O argumento <em>col_types</em> deve ser uma sequência de caracteres onde “c” = “character”, “d” = “double”, “l” = “logical” e “i” = “integer”. Por exemplo:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
dados &lt;- read_delim(file1, 
                    delim = &quot;,&quot;, 
                    col_types = &quot;cicid&quot;)</code></pre>
</div>
<p>Perceba que quando abrimos os dados sem especificar o tipo da coluna, a função <em>read_csv</em> tenta identificá-los.</p>
<p>Uma complexidade de abertura de dados brasileiros é o uso da vírgula como separador decimal e o ponto para indicar milhares. Temos que especificar no argumento <em>locale</em> essas diferenças.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
dados &lt;- read_delim(file1, 
                    delim = &quot;,&quot;, 
                    locale = locale(decimal_mark=&quot;,&quot;,grouping_mark=&quot;.&quot;))</code></pre>
</div>
<p>Também podemos usar <em>locale</em> para especificar o formato da hora, o formato da data e o encoding do arquivo que estamos lendo.</p>
<p>Finalmente, é comum termos problemas para abrir arquivos que contenham caracteres especiais, pois há diferentes formas do computador transformar 0 e 1 em vogais acentuadas, cecedilha, etc. O “encoding” de cada arquivo varia de acordo com o sistema operacional e aplicativo no qual foi gerado.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
dados &lt;- read_delim(file1, 
                    delim = &quot;,&quot;, 
                    locale = locale(encoding=&#39;latin1&#39;))</code></pre>
</div>
<p>Para resolver este problema, informamos ao R o parâmetro <em>encoding</em> dentro do <em>locale</em>, que indica qual é o “encoding” esperado do arquivo. Infelizmente não há formas automáticas infalíveis de descobrir o “encoding” de um arquivo e é preciso conhecer como foi gerado – seja por que você produziu o arquivo ou por que você teve acesso à documentação – ou partir para tentativa e erro. Alguns “encodings” comuns são “latin1”, “latin2” e “utf8”, mas há diversos outros. Como arquivo com o qual estamos trabalhando não contém caracteres especiais, não é preciso fazer nada.</p>
<h2 id="dados-em-arquivos-de-excel">Dados em arquivos de Excel</h2>
<p>Editores de planilha são, em geral, a primeira ferramenta de análise de dados que aprendemos. Diversas organizações disponibilizam (infelizmente) seus dados em formato .xls ou .xlsx e muitos pesquisadores utilizam editores de planilha para construir bases de dados.</p>
<p>Vamos ver como obter dados em formato .xls ou .xlsx diretamente, sem precisar abrir os arquivos e exportá-los para um formato de texto.</p>
<p>Vamos trabalhar com <code>readxl</code>. Importe a biblioteca (não precisa instalá-lo, já está instalado):</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
library(&quot;readxl&quot;)</code></pre>
</div>
<p>Nosso exemplo será a Pesquisa Perfil dos Municípios Brasileiros de 2005, produzida pelo IBGE e apelidade de MUNIC. Diferentemente das demais funções deste tutorial, precisamos baixar o arquivo para o computador e acessá-lo localmente. Faça o download diretamente no browser do <a href="ftp://ftp.ibge.gov.br/Perfil_Municipios/2005/base_MUNIC_2005.zip">site do IBGE</a> e descompacte para o arquivo “base_MUNIC_2005.xls” na pasta do seu projeto.</p>
<p>Note que um ganho enorme de trabalhar dentro de um projeto é que não precisamos nos preocupar com a especificação do endereço inteiro de cada arquivo (o “C:\Users\Documents\…”) - só usamos o nome do arquivo e o R acessa tudo na pasta do projeto.</p>
<p>Com <em>excel_sheets</em> examinamos quais são as planilhas existentes do arquivo:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
excel_sheets(&quot;Base 2005.xls&quot;)</code></pre>
</div>
<p>No caso, temos 11 planilhas diferentes (e um bocado de mensagens de erro estranhas). O dicionário, para quem já trabalhou alguma vez com a MUNIC, não é uma base de dados, apenas textos espalhados entre células. As demais, no entanto, têm formato adequado para um tibble.</p>
<p>Vamos importar os dados da planilha “Variáveis externas”. As duas maneiras abaixo se equivalem:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
# 1
externas &lt;- read_excel(&quot;Base 2005.xls&quot;, &quot;Variáveis externas&quot;)

# 2
externas &lt;- read_excel(&quot;Base 2005.xls&quot;, 11)</code></pre>
</div>
<p>A função <em>read_excel</em> aceita os argumentos “col_names” e “col_types” tal como as funções de importação do pacote <em>readr</em>.</p>
<h2 id="dados-de-spss-stata-e-sas">Dados de SPSS, Stata e SAS</h2>
<p>R é bastante flexível quanto à importação de dados de outros softwares estatísticos. Para este fim também há um pacote <em>haven</em>, que é, advinhe só, parte do <em>tidyverse</em>.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
library(&quot;haven&quot;)</code></pre>
</div>
<p>Basicamente, há cinco funções de importação de dados em <em>haven</em>: <em>read_sas</em>, para dados em SAS; <em>read_stata</em> e <em>read_dta</em>, idênticas, para dados em formato .dta gerados em Stata; e <em>read_sav</em> e <em>read_por</em>, uma para cada formato de dados em SPSS. O uso, como era de se esperar, é bastante similar ao que vimos no tutorial todo.</p>
<p>Vamos usar como exemplo o <a href="http://www.latinobarometro.org/latContents.jsp">Latinobarômetro 2015</a>, que está disponível para SAS, Stata e SPSS. Vamos fazer o processo manual de baixar os dados da página ‘data bank’, e descompactar os arquivos de 2015. Vamos ignorar SAS por razões que não interessam agora e por não ser uma linguagem popular nas ciências sociais.</p>
<p>Vejamos o uso das funções em arquivos de diferentes formatos:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
# SPSS
latino_barometro_spss &lt;- read_spss(&quot;Latinobarometro_2015_Eng.sav&quot;)

# Stata
latino_barometro_stata &lt;- read_stata(&quot;Latinobarometro_2015_Eng.dta&quot;)</code></pre>
</div>
<p>Simples assim.</p>
<p>Há critérios de conversão de variáveis categóricas, rótulos e etc, adotados pelo R ao importar arquivos de outras linguagens, mas você pode descobrí-los testando sozinha.</p>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
